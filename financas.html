<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Sol de Sóter</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <link
      rel="shortcut icon"
      href="img/soldesoter_logo.png"
      type="image/x-icon"
    />

    <link rel="stylesheet" href="css/financas.css" />
    <link rel="stylesheet" href="css/notificacoes.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header>
      <div class="logo-container">
        <a href="index.html" class="logo-link">
          <img src="img/soldesoter_logo.png" alt="Logo Sol de Sóter" />
          <h1>Sol de Sóter</h1>
        </a>
      </div>

      <div class="menu-profile">
        <nav class="navbar">
          <ul class="nav-menu">
            <li class="dropdown">
              <div class="dropdown-header">
                <a href="#">Biblioteca</a>
                <button class="dropdown-toggle">▼</button>
              </div>
              <ul class="dropdown-menu">
                <li><a href="livraria.html">Livraria</a></li>
                <li><a href="cinema.html">Cinema</a></li>
                <li><a href="mangas.html">Mangas</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <div class="dropdown-header">
                <a href="#">Pessoal</a>
                <button class="dropdown-toggle">▼</button>
              </div>
              <ul class="dropdown-menu">
                
                <li><a href="viagens.html">Viagens</a></li>
                <li><a href="wishlist.html">Carrinho</a></li>
                <li><a href="financas.html">Finanças</a></li>
                <li><a href="planejamento.html">Planejamento</a></li>
                <li><a href="academia.html">Academia</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <div class="dropdown-header">
                <a href="#">Diario</a>
                <button class="dropdown-toggle">▼</button>
              </div>
              <ul class="dropdown-menu">
                <li><a href="diario.html">Diario</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <div class="dropdown-header">
                <a href="#">Estudos</a>
                <button class="dropdown-toggle">▼</button>
              </div>
              <ul class="dropdown-menu">
                <li><a href="estudos.html">Planner</a></li>
              </ul>
            </li>
          </ul>
        </nav>

        <div class="notification-center">
          <button id="notification-bell" class="notification-bell">
            <i class="fas fa-bell"></i>
            <span
              id="notification-count"
              class="notification-count"
              style="display: none"
              >0</span
            >
          </button>
          <div id="notification-panel" class="notification-panel">
            <div class="notification-panel-header">
              <h3>Notificações</h3>
            </div>
            <ul id="notification-list" class="notification-list">
              <li class="empty-state">
                <i class="fas fa-inbox"></i>
                <p>Nenhuma notificação nova</p>
              </li>
            </ul>
          </div>
        </div>

        <div class="saldo-display">
          <span class="saldo-header-label">Saldo Atual</span>
          <div id="saldo-do-dia">R$ 0,00</div>
        </div>

        <div class="dropdown profile-dropdown">
          <div class="profile rpg-profile-trigger">
            <div class="profile-info">
              <span class="profile-name">Marcos</span>
              <div class="rpg-mini-bar-container" title="Progresso Geral">
                <div
                  class="rpg-mini-bar-fill"
                  id="header-xp-bar"
                  style="width: 0%"
                ></div>
              </div>
            </div>
            <div class="profile-avatar-wrapper">
              <img src="img/eu-gtp1.1.png" alt="Foto do Usuário" />
              <span class="level-badge" id="header-level-badge">1</span>
            </div>
          </div>

          <ul class="dropdown-menu profile-menu rpg-extended-menu">
            <li class="rpg-stats-panel">
              <div class="rpg-stat-row">
                <span class="stat-icon strength"
                  ><i class="fas fa-dumbbell"></i
                ></span>
                <div class="stat-details">
                  <span class="stat-name"
                    >Força (Lvl <span id="lvl-str">1</span>)</span
                  >
                  <div class="stat-bar-bg">
                    <div
                      class="stat-bar-fill strength-fill"
                      id="bar-str"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="rpg-stat-row">
                <span class="stat-icon intelligence"
                  ><i class="fas fa-brain"></i
                ></span>
                <div class="stat-details">
                  <span class="stat-name"
                    >Intelecto (Lvl <span id="lvl-int">1</span>)</span
                  >
                  <div class="stat-bar-bg">
                    <div
                      class="stat-bar-fill intelligence-fill"
                      id="bar-int"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="rpg-stat-row">
                <span class="stat-icon wisdom"
                  ><i class="fas fa-scroll"></i
                ></span>
                <div class="stat-details">
                  <span class="stat-name"
                    >Sabedoria (Lvl <span id="lvl-wis">1</span>)</span
                  >
                  <div class="stat-bar-bg">
                    <div
                      class="stat-bar-fill wisdom-fill"
                      id="bar-wis"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="rpg-stat-row">
                <span class="stat-icon productivity"
                  ><i class="fas fa-briefcase"></i
                ></span>
                <div class="stat-details">
                  <span class="stat-name"
                    >Produtividade (Lvl <span id="lvl-prod">1</span>)</span
                  >
                  <div class="stat-bar-bg">
                    <div
                      class="stat-bar-fill productivity-fill"
                      id="bar-prod"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
            </li>
            <li class="divider"></li>

            <li>
              <a href="#" class="corinthians-item">
                <img
                  src="img/Corinthians_simbolo.png"
                  alt="Escudo do Corinthians"
                  class="corinthians-shield"
                />
                Corinthians
              </a>
            </li>
            <li>
              <a href="#"><i class="fas fa-cog"></i> Perfil</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-sign-out-alt"></i> Sair</a>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <main>
      <div class="tab-nav">
        <button class="tab-button active" data-tab="controle">
          <i class="fas fa-calendar-alt"></i> Controle Mensal
        </button>
        <button class="tab-button" data-tab="planejamento">
          <i class="fas fa-chart-pie"></i> Orçamento & Relatórios
        </button>
      </div>

      <div class="tab-container">
        <div class="tab-content active" id="tab-controle">
          <div class="dashboard-grid">
            <section class="main-content card">
              <div class="calendar-header">
                <button id="mes-anterior" title="Mês Anterior" class="btn-nav">
                  <i class="fas fa-chevron-left"></i>
                </button>
                <h2 id="calendario-mes">
                  <i class="fas fa-calendar-alt"></i> Carregando...
                </h2>
                <button id="mes-proximo" title="Mês Seguinte" class="btn-nav">
                  <i class="fas fa-chevron-right"></i>
                </button>
              </div>
              <div id="calendario" class="calendar-grid">
                <div class="dia dia-header">Dom</div>
                <div class="dia dia-header">Seg</div>
                <div class="dia dia-header">Ter</div>
                <div class="dia dia-header">Qua</div>
                <div class="dia dia-header">Qui</div>
                <div class="dia dia-header">Sex</div>
                <div class="dia dia-header">Sáb</div>
              </div>
            </section>

            <aside class="sidebar">
              <div class="widget card">
                <h3>Resumo do Mês</h3>
                <div class="form-group">
                  <label for="saldo-inicial">Saldo Inicial (R$)</label>
                  <input
                    type="number"
                    id="saldo-inicial"
                    value="1000"
                    step="0.01"
                    class="input-field"
                  />
                </div>
                <div class="resumo-item">
                  <span>Despesas do Mês:</span>
                  <span id="despesas-valor" class="valor-despesa"
                    >R$ 0,00</span
                  >
                </div>
                <div class="form-group">
                  <label for="filtro-categoria">Filtrar Categoria:</label>
                  <select id="filtro-categoria" class="input-field">
                    <option value="todas">Todas as categorias</option>
                  </select>
                </div>
              </div>

              <div class="widget card" id="melhor-dia">
                <i class="fas fa-spinner fa-spin"></i> Calculando...
              </div>

              <div class="widget card" id="reserva-emergencia">
                <h3><i class="fas fa-shield-alt"></i> Reserva de Emergência</h3>
                <div class="reserva-valor-atual">
                  <span>Saldo Atual:</span>
                  <span id="reserva-valor" class="valor-reserva">R$ 0,00</span>
                </div>
                <div class="form-group">
                  <label for="reserva-meta">Meta da Reserva (R$)</label>
                  <input
                    type="number"
                    id="reserva-meta"
                    value="0"
                    step="100"
                    class="input-field"
                    placeholder="Ex: 6000"
                  />
                </div>
                <div class="reserva-progresso">
                  <div
                    id="reserva-progresso-barra"
                    class="reserva-progresso-barra"
                  ></div>
                  <span id="reserva-progresso-texto">0%</span>
                </div>
              </div>
              <div class="widget card">
                <h3>Ações</h3>
                <button id="gerenciar-categorias" class="btn btn-full">
                  <i class="fas fa-tasks"></i> Gerenciar Categorias
                </button>
                <button
                  id="gerenciar-recorrencias"
                  class="btn btn-full"
                  style="margin-top: 10px"
                >
                  <i class="fas fa-sync-alt"></i> Gerenciar Recorrências
                </button>
              </div>
            </aside>
          </div>
        </div>

        <div class="tab-content" id="tab-planejamento">
          <section class="card">
            <h2>Relatórios & Gráficos</h2>
            <div class="period-selector">
              <button class="period-button active" data-period="mes">
                Mês
              </button>
              <button class="period-button" data-period="semestre">
                Semestre
              </button>
              <button class="period-button" data-period="ano">Ano</button>
            </div>
            <div class="charts-container">
              <div class="chart-wrapper">
                <h3>Entradas vs. Saídas</h3>
                <div class="chart-inner">
                  <canvas id="chart-entrada-saida"></canvas>
                </div>
              </div>
              <div class="chart-wrapper">
                <div class="chart-header-flex">
                  <h3>Orçado vs. Gasto (por Categoria)</h3>
                  <div id="chart-categorias-filter" class="period-selector">
                    <button
                      class="period-button active"
                      data-filter="todas"
                    >
                      Todas
                    </button>
                    <button class="period-button" data-filter="fixa">
                      Fixas
                    </button>
                    <button class="period-button" data-filter="variavel">
                      Variáveis
                    </button>
                  </div>
                </div>
                <div class="chart-inner">
                  <canvas id="chart-categorias"></canvas>
                </div>
              </div>
            </div>
          </section>

          <section class="card">
            <h2>Meu Orçamento Mensal (Envelopes)</h2>
            <p class="subtitle">
              Defina quanto você planeja gastar em cada categoria.
            </p>

            <div class="orcamento-resumo card">
              <h3>Resumo do Orçamento</h3>
              <div class="resumo-item">
                <span
                  ><i
                    class="fas fa-coins"
                    style="color: var(--cor-entrada)"
                  ></i>
                  Renda Prevista:</span
                >
                <span id="orcamento-renda" class="valor-entrada"
                  >R$ 0,00</span
                >
              </div>
              <div class="resumo-item">
                <span
                  ><i
                    class="fas fa-clipboard-list"
                    style="color: var(--cor-saida)"
                  ></i>
                  Total Orçado:</span
                >
                <span id="orcamento-total" class="valor-despesa"
                  >R$ 0,00</span
                >
              </div>
              <div class="resumo-item" id="orcamento-sobra-container">
                <span
                  ><i
                    class="fas fa-balance-scale"
                    style="color: var(--acento-amarelo)"
                  ></i>
                  Sobra / Falta:</span
                >
                <span id="orcamento-sobra" class="valor-reserva"
                  >R$ 0,00</span
                >
              </div>
            </div>

            <div id="orcamento-grid" class="orcamento-grid"></div>
            <button id="btn-salvar-orcamento" class="btn">
              <i class="fas fa-save"></i> Salvar Orçamento
            </button>
          </section>
        </div>
      </div>

      <div id="modal-transacao" class="modal">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h2>Adicionar Transação</h2>
          <form id="form-transacao">
            <input type="hidden" id="transacao-data" />
            <div class="form-group">
              <label for="transacao-tipo">Tipo</label>
              <select id="transacao-tipo" class="input-field">
                <option value="saida">Saída (Despesa)</option>
                <option value="entrada">Entrada (Receita)</option>
                <option value="reserva">Transferência p/ Reserva</option>
              </select>
            </div>
            <div class="form-group">
              <label for="transacao-categoria">Categoria</label>
              <select id="transacao-categoria" class="input-field">
              </select>
            </div>
            <div class="form-group">
              <label for="transacao-valor">Valor (R$)</label>
              <input
                type="number"
                id="transacao-valor"
                class="input-field"
                step="0.01"
                min="0.01"
                required
              />
            </div>
            <div class="modal-actions">
              <button type="submit" class="btn">Salvar</button>
              <button type="button" id="btn-cancelar" class="btn btn-secondary">
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>

      <div id="modal-categorias" class="modal">
        <div class="modal-content">
          <span class="modal-close" id="categorias-modal-close">&times;</span>
          <h2>Gerenciar Categorias</h2>
          <div class="form-group" id="categorias-gerenciar">
            <label for="categoria-nova">Nova Categoria:</label>
            <div class="input-group">
              <input
                type="text"
                id="categoria-nova"
                class="input-field"
                placeholder="Ex: Mercado"
              />
              <button id="btn-adicionar-categoria" class="btn" title="Adicionar">
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <div class="form-group-radio">
              <label>Tipo de Despesa:</label>
              <div class="radio-options">
                <input
                  type="radio"
                  id="categoria-nova-variavel"
                  name="categoria-nova-tipo"
                  value="variavel"
                  checked
                />
                <label for="categoria-nova-variavel">Variável</label>
                <input
                  type="radio"
                  id="categoria-nova-fixa"
                  name="categoria-nova-tipo"
                  value="fixa"
                />
                <label for="categoria-nova-fixa">Fixa</label>
                <input
                  type="radio"
                  id="categoria-nova-nao-aplicavel"
                  name="categoria-nova-tipo"
                  value="nao_aplicavel"
                />
                <label for="categoria-nova-nao-aplicavel"
                  >Não Aplicável (Ex: Salário)</label
                >
              </div>
            </div>
          </div>
          <div class="categorias-lista-header">
            <h3>Categorias Existentes</h3>
            <button id="toggle-categorias" class="btn-toggle">
              <i class="fas fa-eye-slash"></i> Ocultar
            </button>
          </div>
          <div id="categorias-lista"></div>
        </div>
      </div>

      <div id="modal-categoria" class="modal">
        <div class="modal-content">
          <span class="modal-close" id="categoria-modal-close">&times;</span>
          <h2>Editar Categoria</h2>
          <form id="form-categoria">
            <input type="hidden" id="categoria-id" />
            <div class="form-group">
              <label for="categoria-nome">Nome da Categoria</label>
              <input
                type="text"
                id="categoria-nome"
                class="input-field"
                required
              />
            </div>
            <div class="form-group-radio">
              <label>Tipo de Despesa:</label>
              <div class="radio-options">
                <input
                  type="radio"
                  id="categoria-edit-variavel"
                  name="categoria-tipo-despesa"
                  value="variavel"
                  checked
                />
                <label for="categoria-edit-variavel">Variável</label>
                <input
                  type="radio"
                  id="categoria-edit-fixa"
                  name="categoria-tipo-despesa"
                  value="fixa"
                />
                <label for="categoria-edit-fixa">Fixa</label>
                <input
                  type="radio"
                  id="categoria-edit-nao-aplicavel"
                  name="categoria-tipo-despesa"
                  value="nao_aplicavel"
                />
                <label for="categoria-edit-nao-aplicavel"
                  >Não Aplicável (Ex: Salário)</label
                >
              </div>
            </div>
            <div class="modal-actions">
              <button type="submit" class="btn">Salvar Alterações</button>
              <button
                type="button"
                id="btn-cancelar-categoria"
                class="btn btn-secondary"
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>

      <div id="modal-recorrencias" class="modal">
        <div class="modal-content">
          <span class="modal-close" id="recorrencias-modal-close">&times;</span>
          <h2>Gerenciar Recorrências</h2>
          <p class="subtitle">
            Cadastre aqui suas entradas e saídas fixas (salário, aluguel, etc.).
          </p>

          <form id="form-recorrencia">
            <div class="form-group">
              <label for="recorrencia-tipo">Tipo</label>
              <select id="recorrencia-tipo" class="input-field">
                <option value="entrada">Entrada</option>
                <option value="saida">Saída</option>
              </select>
            </div>
            <div class="form-group">
              <label for="recorrencia-categoria">Categoria</label>
              <select id="recorrencia-categoria" class="input-field">
                </select>
            </div>
            <div class="form-group">
              <label for="recorrencia-valor">Valor (R$)</label>
              <input
                type="number"
                id="recorrencia-valor"
                class="input-field"
                step="0.01"
                min="0.01"
                required
              />
            </div>
            <div class="form-group">
              <label for="recorrencia-dia">Dia do Mês (1-31)</label>
              <input
                type="number"
                id="recorrencia-dia"
                class="input-field"
                min="1"
                max="31"
                required
              />
            </div>
            <input type="hidden" id="recorrencia-id" />
            <div class="modal-actions">
              <button type="submit" class="btn">Salvar Recorrência</button>
            </div>
          </form>

          <div class="categorias-lista-header">
            <h3>Recorrências Cadastradas</h3>
          </div>
          <div id="recorrencias-lista">
            </div>
        </div>
      </div>
    </main>
    <footer>
      <p>© 2025 Sol de Sóter. Todos os direitos reservados.</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/saldo-global.js"></script>
    <script src="js/financas.js"></script>
    <script src="js/notificacoes.js"></script>
    <script src="js/rpg.js"></script>
  </body>
</html>